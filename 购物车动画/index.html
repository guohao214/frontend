<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>购物车动画</title>
  <style>
    #cart {
      width: 50px;
      height: 50px;
      position: fixed;
      right: 100px;
      top: 50px;
      background-color: red;
    }

    .goods {
      position: relative;
      background-color: #982551;
      width: 100px;
      height: 100px;
      margin: 50px;
      display: inline-block;
      left: 0;
      top: 0;
    }

    .to-cart {
      position: absolute;
      left: 0;
      width: 100%;
      height: 100%;
      top: 0;
      border: 3px solid #2f2f2f;
      /*transition: all 0.5s;*/
      /*background-color: #2f2f2f;*/
    }

    @keyframes anan {

      0% {
        width: 0px;
        height: 0px;
        left: 50px;
        top: 50px;
      }
      100% {
        width: 95px;
        height: 95px;
        left: 0px;
        top: 0px;
      }
    }
    .an {
      animation: anan 0.7s;
      animation-fill-mode: both;
    }

    .xx {
      transition: all 0.5s;
    }

  </style>
</head>
<body>
  <div id="cart"></div>

  <div class="goods-list">
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <br>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <p></p>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>
    <div class="goods"></div>

  </div>

  <script>
    var cart = document.getElementById('cart')
//    var toCart = document.getElementsByClassName('to-cart')[0];

    var goods = document.getElementsByClassName('goods');
    for(var i = 0; i < goods.length; i++) {
      goods[i].addEventListener('click', function () {
       // console.log(window.getComputedStyle(this))
        var left = this.offsetLeft,
            top = this.offsetTop;

        var toCart = document.createElement('div')
        toCart.className = 'to-cart an'

        this.appendChild(toCart)

        var self = this

        setTimeout(function () {
          self.removeChild(toCart)

          var s = self.cloneNode()
          s.style.backgroundColor = 'blue'
          s.style.position = 'fixed'
          s.style.left = left - 50 + 'px'
          s.style.top = top - 50 +  'px'
          s.className = 'goods xx'

          document.body.appendChild(s)

          s.style.left = cart.offsetLeft -25 + 'px'
          s.style.top = cart.offsetTop -25 + 'px'
          s.style.width = '0px'
          s.style.height = '0px'

          setTimeout(function () {
            document.body.removeChild(s)
          }, 500)

        }, 500)

//        toCart.style.display = 'block'
//        toCart.style.left = left + 'px'
//        toCart.style.top = top + 50 + 'px'

//        toCart.style.left = cart.offsetLeft - left + 'px'
//        toCart.style.top = cart.offsetTop - top + 'px'
      }, false)
    }
  </script>

</body>
</html>